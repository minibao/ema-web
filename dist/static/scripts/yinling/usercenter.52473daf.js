var app=new Vue({el:"#app",data:{uid:"",server:"",roleid:"",role:"",accountID:"",uinfo:{},sex:"",describe:"",winlist:"",winid:"",count_unsend:0,sserver:"",ssource:"",binfo:"",Ecard:"",appId:"20019",desc:"玩游戏兑换京东E卡/Q币卡,现金奖品拿到手软",icon:"",rotateFlag:0,base64:"",filename:"",blob:"",file:"",o:""},methods:{init:function(){app.uid=util.getCookie("squid"),app.sserver=util.getCookie("sserver"),app.ssource=util.getCookie("ssource"),app.getuserdata()},getuserdata:function(){$("#loadingToast").show(),$.ajax({type:"POST",url:"/api/userdata",data:{uid:app.uid},success:function(a){try{if(app.uinfo=a.data,app.uinfo.nickName&&""!=app.uinfo.nickName?$("#name").val(app.uinfo.nickName):(uinfo.nickName=util.getCookie("infoname"),$("#name").val(util.getCookie("infoname"))),$("#phone").val(app.uinfo.telphone),$("#QQ").val(app.uinfo.qq),$("#ads").val(app.uinfo.address),$("#Rname").val(app.uinfo.name),""==app.uinfo.icon||null==app.uinfo.icon){var i=util.getlocalhostPath()+"/static/imgs_static/icon/head.png";$("#cl-img-input").attr("src",i);var e=$("#cl-img-input").width();$("#cl-img-input").css("height",e+"px")}else app.getHeadImgByUrl(app.uinfo.icon);app.accountID=app.uinfo.accountId,util.setCookie("accountId_shequ",app.accountID),app.sex=app.uinfo.sex,app.describe=app.uinfo.signature,1==app.sex?($("#girl").hide(),$("#boy").show()):(app.sex=2)&&($("#girl").show(),$("#boy").hide()),null!=app.uinfo.accountId&&""!=app.uinfo.accountId||($(".layui-layer-btn1").hide(),layer.prompt({title:"请修改你的昵称,昵称不能为空！"},function(a,i){""==a||null==a||layer.close(i)})),""!=app.describe&&app.describe&&$("#info-describe").html(app.describe),app.getUserWinningList(),app.activeGetInfo()}catch(n){var i=util.getlocalhostPath()+"/static/imgs_static/icon/head.png";$("#cl-img-input").attr("src",i),app.uinfo={},app.uinfo.nickName=util.getCookie("infoname"),$("#name").val(util.getCookie("infoname")),$("#loadingToast").hide()}}})},getHeadImgByUrl:function(a){$.ajax({type:"post",url:a,success:function(a){try{$("#cl-img-input").attr("src",a);var i=$("#cl-img-input").width();$("#cl-img-input").css("height",i+"px")}catch(e){}}})},activeGetInfo:function(){app.accountID?$.ajax({type:"POST",url:"/api/active_getinfo",data:{accountId:app.accountID},success:function(a){try{app.binfo=a.data,$("#loadingToast").hide()}catch(i){$("#loadingToast").hide()}}}):$("#loadingToast").hide()},getUserWinningList:function(){""!=app.accountID?$.ajax({type:"POST",url:"/api/getUserWinningList",data:{accountId:app.accountID},success:function(a){try{app.count_unsend=0,app.winlist=a.data,""!=a.lastSendCardName&&(app.desc="我拿到了"+a.lastSendCardName+", 现金奖品拿到手软");for(var i=0;i<a.data.length;i++)"0"==a.data[i].isSend&&(app.count_unsend=app.count_unsend+1)}catch(e){}}}):console.log("accountID为空！")}}});app.init(),$(document).ready(function(){$(".infobar .bars").click(function(){$(this).addClass("bars-active").siblings(".bars").removeClass("bars-active"),$(".bars img").removeClass("box-shadow"),$(this).find("img").addClass("box-shadow");var a=$(this).find("p").html();"个人中心"==a?($(".lottery-list").hide(),$(".ningmeng").hide(),$(".user-info").show()):"柠檬兑换"==a?($(".user-info").hide(),$(".lottery-list").hide(),$(".ningmeng").show()):($(".user-info").hide(),$(".ningmeng").hide(),$(".lottery-list").show())}),$("#sharebtn").click(function(){$(".sharemask").show()}),$(".shareclose").click(function(){$(".sharemask").hide()}),$("#Recharge").click(function(){$(".addSenior").show()}),$("#addS-close").click(function(){$(".addSenior").hide()})});