var wxs=new Vue({el:"#wxshare",data:{appId:"20019",jsApiTicket:"",url:"",accesstoken:"",appKey:"71599476762ca9835879f4d188919549"},methods:{getaccessToken:function(){$.ajax({type:"GET",url:"/api/getWxAccessToken",success:function(e){wxs.accesstoken=e.access_token,wxs.getapi_ticket()},error:function(e){console.log(e)}})},getapi_ticket:function(){$.ajax({type:"POST",url:"/api/apiticket",data:{accesstoken:wxs.accesstoken,type:"jsapi"},success:function(e){console.log(e),wxs.jsApiTicket=e.ticket,wxs.wxshareAddSign()},error:function(e){console.log(e)}})},wxshareAddSign:function(){var e=encodeURIComponent(location.href.split("#")[0]);$.ajax({type:"POST",url:"/api/shareaddSign",data:{appId:wxs.appId,jsApiTicket:wxs.jsApiTicket,url:e,appKey:wxs.appKey},success:function(e){console.log(e),e&&0==e.status&&wx.config({debug:!0,appId:"wx90ea8be0c05b9630",timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["onMenuShareQZone","checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","getNetworkType","hideOptionMenu","showOptionMenu","closeWindow","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","scanQRCode","chooseWXPay"]}),wx.ready(function(){var e=getCookie("squid"),n=getCookie("sserver"),s=getCookie("ssource"),o=location.href.split("?")[0],t={title:"次元战绩分享",desc:"次元战绩分享",link:o+"?uid="+e+"&server="+n+"&source="+s,imgUrl:"https://staging-social.lemonade-game.com/static/imgs_static/heroes/126_1_1.png",type:"link",dataUrl:"",success:function(){},cancel:function(){}};wx.onMenuShareQZone(t),wx.onMenuShareAppMessage(t),wx.onMenuShareTimeline(t),wx.onMenuShareQQ(t)})},error:function(e){console.log(e)}})}}});wxs.getaccessToken();