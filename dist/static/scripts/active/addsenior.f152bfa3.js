var adds=new Vue({el:"#addS",data:{uid:"",token:"",gameTransCode:"",appId:"20019",pid:"NM_0001",quantity:"1",appKey:"71599476762ca9835879f4d188919549",sign:"",orderId:"",productInfo:"",orderInfo:"",timestamp:"",app_id:"2016070901596612",accountId:"",psd:"",orderId:""},methods:{addsenjorevent:function(){},getuserdata:function(){adds.uid&&$.ajax({type:"POST",url:"/api/userdata",data:{uid:adds.uid},success:function(d){try{adds.accountId=d.data.accountId,console.log(adds.accountId),console.log(),adds.accountId&&adds.createOrderSociety()}catch(a){}}})},createOrderSociety:function(){adds.uid&&$.ajax({type:"POST",url:"/api/createOrderData",data:{uid:adds.uid,appId:adds.appId,token:adds.token,pid:adds.pid,quantity:adds.quantity,appKey:adds.appKey,accountId:adds.accountId},success:function(d){try{console.log(d),adds.gameTransCode=d.data.orderId,adds.timestamp=d.data.time,adds.createOrder()}catch(a){}}})},createOrder:function(){adds.uid&&$.ajax({type:"POST",url:"/api/createOrder",data:{uid:adds.uid,appId:adds.appId,token:adds.token,pid:adds.pid,quantity:"1",gameTransCode:adds.gameTransCode,appKey:adds.appKey},success:function(d){try{var a=d.data;adds.orderId=a.orderId,0==a.coinEnough?alert("游戏账户游戏币不够！"):1==a.coinEnough&&layer.prompt({title:"请输入游戏支付密码！"},function(d,a){console.log(d),""==d||null==d?adds.confirmOrder(d):layer.close(a)})}catch(e){}}})},confirmOrder:function(d){return""!=d&&null!=d&&void $.ajax({type:"POST",url:"/api/confirmOrder",data:{uid:adds.uid,appId:adds.appId,token:adds.token,orderId:adds.orderId,chargePwd:d},success:function(d){try{"0"==d.status?layer.msg(d.message):layer.msg(d.message)}catch(a){}}})},chooseyuan:function(d){$(document).ready(function(){$(".chooseyuan img").click(function(){$(".chooseyuan img").removeClass("yuanactive"),$(this).addClass("yuanactive"),$("#jingying_num").val($(this).attr("jine"))}),$("#jingying_num").focus(function(){$(".chooseyuan img").removeClass("yuanactive")})})}}});adds.uid=util.getCookie("uid"),adds.token=util.getCookie("token"),adds.addsenjorevent(),adds.chooseyuan();